\hypertarget{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4}{\section{xtd\-:\-:network\-:\-:utils\-:\-:Resolver$<$ af\-\_\-inet $>$ Class Template Reference}
\label{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4}\index{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}}
}


{\ttfamily \#include $<$Resolver.\-hh$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a227d9b53586520412dde2ff93e373b65}{Resolver} (boost\-::asio\-::io\-\_\-service \&p\-\_\-io\-Service, uint32\-\_\-t p\-\_\-ttl)
\begin{DoxyCompactList}\small\item\em Constructeur. \end{DoxyCompactList}\item 
\hyperlink{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a52780e208a95d05c6eeacc4842851162}{$\sim$\-Resolver} (void)
\item 
af\-\_\-inet\-::endpoint \hyperlink{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a014b2c1347380dece13b309969ed25c3}{resolve} (const string \&p\-\_\-host, const string \&p\-\_\-port)
\begin{DoxyCompactList}\small\item\em Resoudre un dns. \end{DoxyCompactList}\item 
uint32\-\_\-t \hyperlink{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_ac98e2d8aec992068faa974ccca220e4c}{get\-Port} (const af\-\_\-inet\-::endpoint \&p\-\_\-endpoint)
\begin{DoxyCompactList}\small\item\em Extraction du port à partir d'un endpoint. \end{DoxyCompactList}\item 
string \hyperlink{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a32b299d5a15042feea05622ee3df0d4c}{get\-Addr} (const af\-\_\-inet\-::endpoint \&p\-\_\-endpoint)
\begin{DoxyCompactList}\small\item\em Extraction de l'I\-P à partir d'un endpoind. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$$>$class xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}



Definition at line 30 of file Resolver.\-hh.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a227d9b53586520412dde2ff93e373b65}{\index{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}!Resolver@{Resolver}}
\index{Resolver@{Resolver}!xtd::network::utils::Resolver< af_inet >@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}}
\subsubsection[{Resolver}]{\setlength{\rightskip}{0pt plus 5cm}{\bf xtd\-::network\-::utils\-::\-Resolver}$<$ {\bf af\-\_\-inet} $>$\-::{\bf Resolver} (
\begin{DoxyParamCaption}
\item[{boost\-::asio\-::io\-\_\-service \&}]{p\-\_\-io\-Service, }
\item[{uint32\-\_\-t}]{p\-\_\-ttl}
\end{DoxyParamCaption}
)}}\label{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a227d9b53586520412dde2ff93e373b65}


Constructeur. 


\begin{DoxyParams}{Parameters}
{\em p\-\_\-io\-Service} & référence sur le io\-\_\-server \\
\hline
{\em p\-\_\-ttl} & duree de vie de la mise en cache des resolutions dns\\
\hline
{\em p\-\_\-io\-Service} & \-: boost\-::asio\-::io\-\_\-service \\
\hline
{\em p\-\_\-ttl} & \-: cache entry time to live in seconds \\
\hline
\end{DoxyParams}


Definition at line 13 of file Resolver.\-cc.


\begin{DoxyCode}
13                                                                            :
14   m\_ioService(p\_ioService)
15 \{
16   m\_cacheDns\_ptr = boost::make\_shared<CacheDns>(\hyperlink{namespacextd_1_1network_1_1utils_a8939e806c4a6bc08b78a32941db7a130}{CACHE\_CAPACITY\_MAX},p\_ttl);
17 \}
\end{DoxyCode}
\hypertarget{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a52780e208a95d05c6eeacc4842851162}{\index{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}!$\sim$\-Resolver@{$\sim$\-Resolver}}
\index{$\sim$\-Resolver@{$\sim$\-Resolver}!xtd::network::utils::Resolver< af_inet >@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}}
\subsubsection[{$\sim$\-Resolver}]{\setlength{\rightskip}{0pt plus 5cm}{\bf xtd\-::network\-::utils\-::\-Resolver}$<$ {\bf af\-\_\-inet} $>$\-::$\sim${\bf Resolver} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a52780e208a95d05c6eeacc4842851162}


Definition at line 19 of file Resolver.\-cc.


\begin{DoxyCode}
20 \{
21 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a32b299d5a15042feea05622ee3df0d4c}{\index{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}!get\-Addr@{get\-Addr}}
\index{get\-Addr@{get\-Addr}!xtd::network::utils::Resolver< af_inet >@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}}
\subsubsection[{get\-Addr}]{\setlength{\rightskip}{0pt plus 5cm}string {\bf xtd\-::network\-::utils\-::\-Resolver}$<$ {\bf af\-\_\-inet} $>$\-::get\-Addr (
\begin{DoxyParamCaption}
\item[{const af\-\_\-inet\-::endpoint \&}]{p\-\_\-endpoint}
\end{DoxyParamCaption}
)}}\label{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a32b299d5a15042feea05622ee3df0d4c}


Extraction de l'I\-P à partir d'un endpoind. 



Definition at line 72 of file Resolver.\-cc.


\begin{DoxyCode}
73 \{
74   \textcolor{keywordflow}{return} p\_endpoint.address().to\_string();
75 \}
\end{DoxyCode}
\hypertarget{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_ac98e2d8aec992068faa974ccca220e4c}{\index{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}!get\-Port@{get\-Port}}
\index{get\-Port@{get\-Port}!xtd::network::utils::Resolver< af_inet >@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}}
\subsubsection[{get\-Port}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t {\bf xtd\-::network\-::utils\-::\-Resolver}$<$ {\bf af\-\_\-inet} $>$\-::get\-Port (
\begin{DoxyParamCaption}
\item[{const af\-\_\-inet\-::endpoint \&}]{p\-\_\-endpoint}
\end{DoxyParamCaption}
)}}\label{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_ac98e2d8aec992068faa974ccca220e4c}


Extraction du port à partir d'un endpoint. 



Definition at line 65 of file Resolver.\-cc.


\begin{DoxyCode}
66 \{
67   \textcolor{keywordflow}{return} p\_endpoint.port();
68 \}
\end{DoxyCode}
\hypertarget{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a014b2c1347380dece13b309969ed25c3}{\index{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}!resolve@{resolve}}
\index{resolve@{resolve}!xtd::network::utils::Resolver< af_inet >@{xtd\-::network\-::utils\-::\-Resolver$<$ af\-\_\-inet $>$}}
\subsubsection[{resolve}]{\setlength{\rightskip}{0pt plus 5cm}af\-\_\-inet\-::endpoint {\bf xtd\-::network\-::utils\-::\-Resolver}$<$ {\bf af\-\_\-inet} $>$\-::resolve (
\begin{DoxyParamCaption}
\item[{const string \&}]{p\-\_\-host, }
\item[{const string \&}]{p\-\_\-port}
\end{DoxyParamCaption}
)}}\label{classxtd_1_1network_1_1utils_1_1Resolver_3_01af__inet_01_4_a014b2c1347380dece13b309969ed25c3}


Resoudre un dns. 


\begin{DoxyParams}{Parameters}
{\em p\-\_\-host} & nom de domaine ou ip à résoudre \\
\hline
{\em p\-\_\-port} & port de destination \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
représentation boost asio d'une résolution, un endpoint. 
\end{DoxyReturn}


Definition at line 25 of file Resolver.\-cc.


\begin{DoxyCode}
27 \{
28   \textcolor{keywordtype}{string} l\_ipAddress;
29 
30   \textcolor{keywordtype}{bool} l\_isCached = m\_cacheDns\_ptr->popElem(p\_host, l\_ipAddress);
31 
32   \textcolor{keywordflow}{if} (l\_isCached)
33   \{
34     \textcolor{comment}{// the element was retrieved from the cache}
35     \textcolor{comment}{// build af\_inet::endpoint}
36     uint32\_t l\_port = boost::lexical\_cast<uint32\_t>(p\_port);
37     \textcolor{keywordtype}{string}  l\_addr = l\_ipAddress;
38     l\_addr += \textcolor{stringliteral}{"\_"};
39     l\_addr += p\_port;
40     af\_inet::endpoint l\_endpoint(boost::asio::ip::address::from\_string(l\_ipAddress), l\_port);
41     \textcolor{keywordflow}{return} l\_endpoint;
42   \}
43   \textcolor{keywordflow}{else}
44   \{
45     \textcolor{comment}{// perform resolution of the host}
46     af\_inet::resolver        l\_resolver(m\_ioService);
47     af\_inet::resolver::query l\_query(p\_host, p\_port);
48     af\_inet::endpoint        l\_endpoint;
49     \textcolor{keywordflow}{try}
50     \{
51       l\_endpoint = *l\_resolver.resolve(l\_query);
52       \textcolor{comment}{// insertion in the cache;}
53       m\_cacheDns\_ptr->pushElem(p\_host,l\_endpoint.address().to\_string());
54     \}
55     \textcolor{keywordflow}{catch}(\textcolor{keyword}{const} boost::system::system\_error& ex)
56     \{
57       logger::crit(\textcolor{stringliteral}{"network.utils"}, \textcolor{stringliteral}{"Can't resolve hostname %s:%s"}, p\_host, p\_port, HERE);
58     \}
59     \textcolor{keywordflow}{return} l\_endpoint;
60   \}
61 \}
\end{DoxyCode}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/home/travis/build/psycofdj/xtdcpp/network/src/utils/\hyperlink{Resolver_8hh}{Resolver.\-hh}\item 
/home/travis/build/psycofdj/xtdcpp/network/src/utils/\hyperlink{Resolver_8cc}{Resolver.\-cc}\end{DoxyCompactItemize}
